<!DOCTYPE html>
<html>
<head>
  <title>Etch A Sketch</title>
  <meta charset="UTF-8"/>
</head>

<style>

    body {
        display: grid;
        grid-template-columns: 1fr 2fr 1fr;
        justify-items: center;
        align-items: center;
        background-image: url("images/artEurope3.png");
        background-repeat: no-repeat;
        background-size: cover;
    }

    .canvasOptions, .cursorOptions {
        height: 310px;
        width: 100%;
        background-color:white;
    }

    .legend {
        background-color: white;
    }

    h1 {
        color: white;
        font-size: 40px;
    }

    .gridContainer {
        width: 600px;
        height: 600px;
        margin-top: 5px;
        border: black 5px solid;
    }

    .grid {
        display: grid;
        width: 600px;
        height: 600px;
        grid-template-columns: repeat(8, 1fr);
        grid-template-rows: repeat(8, 1fr);
        background-color: white;
    }
    
    
    .gridElement {
        display: inline-block;
        width: 1fr;
        height: 1fr;
        opacity: 1;
    }

    .gridLinesBlack {
        border-left: 1px solid black;
        border-top: 1px solid black;
    }

    .gridLinesWhite {
        border-left: 1px solid white;
        border-top: 1px solid white;
    }

    .middle {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .reload {
        margin-top: 10px;
        font-size: 24px;
    }


</style>

<body>

    <div class="left">
        <fieldset class="canvasOptions">
            <legend class="legend">Canvas Options:</legend>

            <h3>Canvas Dimensions:</h3>
            <input type="range" min="1" max="100" value="8" id="dimensionsSlider">
            <input type="number" min="1" max="100" value="8" id="dimensionsNumber"><br>
            
            <h3>Canvas Color:</h3>
            <div id="canvasColor">
                <span class="colorPanel" id="whiteCanvas">
                    <label for="whiteSelector">White</label>
                    <input type="radio" class="canvasColorSelector" id="whiteSelector" name="canvasColorSelector" checked>
                    <div class="canvasExample" id="whiteCanvasExample"></div>
                </span>
                <span class="colorPanel" id="blackCanvas">
                    <label for="whiteSelector">Black</label>
                    <input type="radio" class="canvasColorSelector" id="blackSelector" name="canvasColorSelector">
                    <div class="canvasExample" id="blackCanvasExample"></div>
                </span>
                <span class="colorPanel" id="colorCanvas">
                    <label for="colorSelector">Color</label>
                    <input type="radio" class="canvasColorSelector" id="colorSelector" name="canvasColorSelector">
                    <input type="color" id="colorBrowser" value="#ff0000">
                    <div class="canvasExample" id="colorCanvasExample"></div>
                </span>
            </div>
    
            <h3>Grid Lines:</h3>
            <div id="gridLines">
                <span class="canvasGridLines">
                    <label for="gridLinesBlack">Black</label>
                    <input type="checkbox" id="gridLinesBlack">
                </span>
                <span class="canvasGridLines">
                    <label for="gridLinesWhite">White</label>
                    <input type="checkbox" id="gridLinesWhite">
                </span>
            </div>

    
        </fieldset>
    </div>

    <div class="middle">
        <h1>Etch a Sketch</h1>
        <div class="gridContainer">
            <div class="grid">
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
                <div class="gridElement"></div>
            </div>
        </div>
        <button class="reload">Reload</button>
    </div>

    <div class="right">
        <fieldset class="cursorOptions">
            <legend class="legend">Cursor Options:</legend>

            <h3>Draw Types:</h3>
            <div class="drawTypeMenu">
                <span class="drawType" id="drawHover">
                    <label for="drawOnHover">Hover</label>
                    <input type="radio" class="drawTypeSelector" id="drawOnHover" name="drawType" checked>
                </span>
                <span class="drawType" id="drawClick">
                    <label for="drawOnClick">Click</label>
                    <input type="radio" class="drawTypeSelector" id="drawOnClick" name="drawType">
                </span>
            </div>

            <h3>Draw Color:</h3>
            <div class="drawColorMenu">
                <span class="drawColor" id="drawRandom">
                    <label for="drawRandomOption">Random</label>
                    <input type="radio" class="drawColorSelector" id="drawRandomOption" name="drawColorSelector" checked>
                    <div class="drawExample" id="drawRandomExample"></div>
                </span>
                <span class="drawColor" id="drawCustom">
                    <label for="drawCustomOption">Custom</label>
                    <input type="radio" class="drawColorSelector" id="drawCustomOption" name="drawColorSelector">
                    <input type="color" id="drawColorBrowser" value="#ff0000">
                    <div class="drawExample" id="drawCustomExample"></div>
                </span>
            </div>
        
            <h3>Draw Options:</h3>
            <div class="drawOptionsMenu">
                <span class="drawOption" id="drawInColor">
                    <label for="drawColorOption">Color</label>
                    <input type="radio" class="drawOptionSelector" id="drawColorOption" name="drawOptionSelector" checked>
                </span>
                <span class="drawOption" id="drawInEraser">
                    <label for="drawEraserOption">Eraser</label>
                    <input type="radio" class="drawOptionSelector" id="drawEraserOption" name="drawOptionSelector">
                </span>
                <br>
                <span class="drawOption" id="drawDecOpacity">
                    <label for="drawDecOpacityOption">Decrease Opacity</label>
                    <input type="radio" class="drawOptionSelector" id="drawDecOpacityOption" name="drawOptionSelector">
                </span>
                <span class="drawOption" id="drawIncOpacity">
                    <label for="drawIncOpacityOption">Increase Opacity</label>
                    <input type="radio" class="drawOptionSelector" id="drawIncOpacityOption" name="drawOptionSelector">
                </span>
            </div>
            
        </fieldset>
    </div>

</body>

<script>
    const body = document.querySelector('body')
    const reload = document.querySelector('.reload')
    const grid = document.querySelector('.grid')
    var divCount = document.querySelector('.grid').childElementCount;
    let newNode = document.querySelector('.grid').firstChild
    let gridCells = document.querySelectorAll('.gridElement')
    const dimensionsSlider = document.getElementById('dimensionsSlider')
    const dimensionsNumber = document.getElementById('dimensionsNumber')
    let gridArea = document.getElementById('dimensionsNumber').value  
    const gridColors = document.querySelectorAll('.canvasColorSelector')
    const colorBrowser = document.getElementById('colorBrowser')
    const drawColorBrowser = document.getElementById('drawColorBrowser')

   




    /* Change Dimensions */
    function newDimensionsSlider() {
        dimensionsNumber.value = dimensionsSlider.value
    }

    function newDimensionsNumber() {
        dimensionsSlider.value = dimensionsNumber.value
    }

    dimensionsSlider.addEventListener("change", newDimensionsSlider);
    dimensionsNumber.addEventListener("change", newDimensionsNumber);


  
    /* Change Draw Type */
    const drawTypes = document.querySelectorAll('.drawTypeSelector')
    const drawOptions = document.querySelectorAll('.drawOptionSelector')

    function changeDrawType() {
        let gridCells = document.querySelectorAll('.gridElement')
        if (drawOnHover.checked) {
            gridCells.forEach((cell) => {
                cell.removeEventListener("click", changeCellColor);
                cell.addEventListener("mouseover", changeCellColor);
            });
        } else if (drawOnClick.checked) {
            gridCells.forEach((cell) => {
                cell.removeEventListener("mouseover", changeCellColor);
                cell.addEventListener("click", changeCellColor);
            });
        } 
    }

    drawTypes.forEach((item) => {
        item.addEventListener("input", changeDrawType);
    });

    drawOptions.forEach((item) => {
        item.addEventListener("input", changeDrawType);
    });










    /* Default Change Cell Colors */
    const drawColorSelector = document.querySelector('.drawColorSelector')

    function changeCellColor(event) {
        if (drawColorOption.checked){
            if (drawRandomOption.checked) {
                event.target.style = `background-color: rgb(${(Math.random() * 255) + 1}, ${(Math.random() * 255) + 1}, ${(Math.random() * 255) + 1});`
            } else if (drawCustomOption.checked) {
                event.target.style.setProperty("background-color", drawColorBrowser.value);
            }
        } else if (drawDecOpacityOption.checked) {
            var currentOpacity = Number(event.target.style.getPropertyValue("opacity"));
            if (currentOpacity == 0) {
                currentOpacity = 1;
            }
            event.target.style.opacity = currentOpacity - 0.099;
        } else if (drawIncOpacityOption.checked) {
            var currentOpacity = Number(event.target.style.getPropertyValue("opacity"));
            if (currentOpacity == 0) {
                currentOpacity = 1;
            }
            event.target.style.opacity = currentOpacity + 0.099;
        } else if (drawEraserOption.checked) {
            event.target.style = 'background-color: transparent;'
        }

    }

    gridCells.forEach((cell) => {
        cell.addEventListener("mouseover", changeCellColor);
    });




    /* Toggle Grid Lines */
    let canvasGridLines = document.querySelectorAll('.canvasGridLines')
    let gridLinesWhiteCheck = document.getElementById('gridLinesWhite')
    let gridLinesBlackCheck = document.getElementById('gridLinesBlack')

    function makeWhiteGrid(cell) {
        cell.classList.toggle("gridLinesBlack", false);
        cell.classList.toggle("gridLinesWhite", true);
    }

    function makeBlackGrid(cell) {
        cell.classList.toggle("gridLinesWhite", false);
        cell.classList.toggle("gridLinesBlack", true);
    }

    function clearGrid(cell) {
        cell.classList.toggle("gridLinesWhite", false);
        cell.classList.toggle("gridLinesBlack", false);
    }

    function toggleWhiteGrid() {
        let gridCells = document.querySelectorAll('.gridElement')
        gridLinesBlackCheck.checked = false;
        if (gridLinesWhite.checked) {
            gridCells.forEach(makeWhiteGrid);
        } else {
            gridCells.forEach(clearGrid);
        }
    }

    function toggleBlackGrid() {
        let gridCells = document.querySelectorAll('.gridElement')
        gridLinesWhiteCheck.checked = false;
        if (gridLinesBlack.checked) {
            gridCells.forEach(makeBlackGrid);
        } else {
            gridCells.forEach(clearGrid);
        }
    }

    gridLinesWhiteCheck.addEventListener("change", toggleWhiteGrid);
    gridLinesBlackCheck.addEventListener("change", toggleBlackGrid);
    

    /* Canvas Color */

    function changeCanvasColor() {
        let gridCells = document.querySelectorAll('.gridElement')
        if (blackSelector.checked) {
            grid.style.setProperty("background-color", "black");
        } else if (whiteSelector.checked) {
            grid.style.setProperty("background-color", "white");
        } else if (colorSelector.checked) {
            grid.style.setProperty("background-color", colorBrowser.value);
        }
    }

    colorBrowser.addEventListener("input", changeCanvasColor);

    gridColors.forEach((item) => {
        item.addEventListener("input", changeCanvasColor);
    });








    function reset() {
        gridArea = document.getElementById('dimensionsNumber').value  

        while (grid.hasChildNodes()) {
            grid.removeChild(grid.childNodes[0])
        } 

        grid.style = `grid-template-columns: repeat(${gridArea}, 1fr); grid-template-rows: repeat(${gridArea}, 1fr);`
        
        for (let i = 1; i <= Math.pow(gridArea, 2); i++) {
            let newDiv = document.createElement('div');
            newDiv.classList.add('gridElement');
            grid.appendChild(newDiv);
            newDiv.addEventListener("mouseover", changeCellColor);
        }

        whiteSelector.checked = true;
        blackSelector.checked = false;
        colorSelector.checked = false;
        drawHover.checked = true;
        drawClick.checked = false;
        drawRandomOption.checked = true;
        drawCustomOption.checked = false;
        gridLinesBlackCheck.checked = false;
        gridLinesWhiteCheck.checked = false;

    }

    reload.addEventListener('click', reset);

</script>

</html>